import{g as V,u as W,h as X,i as Z,j as ee,t as te,k as le,l as A,m as k,n as e,p as se,q as ae,s as re,R as $,v as ce,x as ie,y as he,z as ne,A as oe,B as I,C as M,D as ue,E as me,F as de,G as ve,L as pe,H as ye,I as ge,J as fe,K as U,M as we,N as H}from"./app-BTkjaAF8.js";const xe=["/PREFACE.html","/","/SUMMARY.html","/appendix-00.html","/appendix-01-keywords.html","/appendix-02-operators.html","/appendix-03-derivable-traits.html","/appendix-04-useful-development-tools.html","/appendix-05-editions.html","/appendix-06-translation.html","/appendix-07-nightly-rust.html","/ch00-00-introduction.html","/ch01-00-getting-started.html","/ch01-01-installation.html","/ch01-02-hello-world.html","/ch01-03-hello-cargo.html","/ch02-00-guessing-game-tutorial.html","/ch03-00-common-programming-concepts.html","/ch03-01-variables-and-mutability.html","/ch03-02-data-types.html","/ch03-03-how-functions-work.html","/ch03-04-comments.html","/ch03-05-control-flow.html","/ch04-00-understanding-ownership.html","/ch04-01-what-is-ownership.html","/ch04-02-references-and-borrowing.html","/ch04-03-slices.html","/ch05-00-structs.html","/ch05-01-defining-structs.html","/ch05-02-example-structs.html","/ch05-03-method-syntax.html","/ch06-00-enums.html","/ch06-01-defining-an-enum.html","/ch06-02-match.html","/ch06-03-if-let.html","/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html","/ch07-01-packages-and-crates.html","/ch07-02-defining-modules-to-control-scope-and-privacy.html","/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html","/ch07-04-bringing-paths-into-scope-with-the-use-keyword.html","/ch07-05-separating-modules-into-different-files.html","/ch08-00-common-collections.html","/ch08-01-vectors.html","/ch08-02-strings.html","/ch08-03-hash-maps.html","/ch09-00-error-handling.html","/ch09-01-unrecoverable-errors-with-panic.html","/ch09-02-recoverable-errors-with-result.html","/ch09-03-to-panic-or-not-to-panic.html","/ch10-00-generics.html","/ch10-01-syntax.html","/ch10-02-traits.html","/ch10-03-lifetime-syntax.html","/ch11-00-testing.html","/ch11-01-writing-tests.html","/ch11-02-running-tests.html","/ch11-03-test-organization.html","/ch12-00-an-io-project.html","/ch12-01-accepting-command-line-arguments.html","/ch12-02-reading-a-file.html","/ch12-03-improving-error-handling-and-modularity.html","/ch12-04-testing-the-librarys-functionality.html","/ch12-05-working-with-environment-variables.html","/ch12-06-writing-to-stderr-instead-of-stdout.html","/ch13-00-functional-features.html","/ch13-01-closures.html","/ch13-02-iterators.html","/ch13-03-improving-our-io-project.html","/ch13-04-performance.html","/ch14-00-more-about-cargo.html","/ch14-01-release-profiles.html","/ch14-02-publishing-to-crates-io.html","/ch14-03-cargo-workspaces.html","/ch14-04-installing-binaries.html","/ch14-05-extending-cargo.html","/ch15-00-smart-pointers.html","/ch15-01-box.html","/ch15-02-deref.html","/ch15-03-drop.html","/ch15-04-rc.html","/ch15-05-interior-mutability.html","/ch15-06-reference-cycles.html","/ch16-00-concurrency.html","/ch16-01-threads.html","/ch16-02-message-passing.html","/ch16-03-shared-state.html","/ch16-04-extensible-concurrency-sync-and-send.html","/ch17-00-async-await.html","/ch17-01-futures-and-syntax.html","/ch17-02-concurrency-with-async.html","/ch17-03-more-futures.html","/ch17-04-streams.html","/ch17-05-traits-for-async.html","/ch17-06-futures-tasks-threads.html","/ch18-00-oop.html","/ch18-01-what-is-oo.html","/ch18-02-trait-objects.html","/ch18-03-oo-design-patterns.html","/ch19-00-patterns.html","/ch19-01-all-the-places-for-patterns.html","/ch19-02-refutability.html","/ch19-03-pattern-syntax.html","/ch20-00-advanced-features.html","/ch20-01-unsafe-rust.html","/ch20-03-advanced-traits.html","/ch20-04-advanced-types.html","/ch20-05-advanced-functions-and-closures.html","/ch20-06-macros.html","/ch21-00-final-project-a-web-server.html","/ch21-01-single-threaded.html","/ch21-02-multithreaded.html","/ch21-03-graceful-shutdown-and-cleanup.html","/foreword.html","/title-page.html","/404.html","/category/","/tag/","/Blog/","/star/","/timeline/"],be="SLIMSEARCH_QUERY_HISTORY",g=U(be,[]),ke=()=>{const{queryHistoryCount:a}=H;return{enabled:a>0,queryHistories:g,addQueryHistory:h=>{g.value=Array.from(new Set([h,...g.value.slice(0,a-1)]))},removeQueryHistory:h=>{g.value=[...g.value.slice(0,h),...g.value.slice(h+1)]}}},D=a=>xe[a.id]+("anchor"in a?`#${a.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:T}=H,f=U(He,[]),Re=()=>({enabled:T>0,resultHistories:f,addResultHistory:i=>{{const h={link:D(i),display:i.display};"header"in i&&(h.header=i.header),f.value=[h,...f.value.slice(0,T-1)]}},removeResultHistory:i=>{f.value=[...f.value.slice(0,i),...f.value.slice(i+1)]}}),Qe=a=>{const{page:i,routeLocale:h}=ue(),R=me(),r=A(0),w=k(()=>r.value>0),u=de([]);return ve(()=>{const{search:Q,terminate:v}=pe(),x=ge(p=>{const{resultsFilter:S=s=>s,querySplitter:y,suggestionsFilter:E,...c}=R.value;p?(r.value+=1,Q(p,h.value,c).then(s=>S(s,p,h.value,i.value)).then(s=>{r.value-=1,u.value=s}).catch(s=>{console.warn(s),r.value-=1,r.value||(u.value=[])})):u.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});ye([a,h],([p])=>x(p.join(" "))),fe(()=>{v()})}),{isSearching:w,results:u}};var qe=V({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const h=W(),R=X(),r=Z(ee),{addQueryHistory:w,queryHistories:u,removeQueryHistory:Q}=ke(),{resultHistories:v,addResultHistory:x,removeResultHistory:p}=Re(),S=te(a,"queries"),{results:y,isSearching:E}=Qe(S),c=le({isQuery:!0,index:0}),s=A(0),m=A(0),j=k(()=>u.value.length>0||v.value.length>0),q=k(()=>y.value.length>0),C=k(()=>y.value[s.value]||null),P=()=>{const{isQuery:t,index:l}=c;l===0?(c.isQuery=!t,c.index=t?v.value.length-1:u.value.length-1):c.index=l-1},Y=()=>{const{isQuery:t,index:l}=c;l===(t?u.value.length-1:v.value.length-1)?(c.isQuery=!t,c.index=0):c.index=l+1},_=()=>{s.value=s.value>0?s.value-1:y.value.length-1,m.value=C.value.contents.length-1},B=()=>{s.value=s.value<y.value.length-1?s.value+1:0,m.value=0},O=()=>{m.value<C.value.contents.length-1?m.value+=1:B()},z=()=>{m.value>0?m.value-=1:_()},L=t=>t.map(l=>we(l)?l:e(l[0],l[1])),G=t=>{if(t.type==="customField"){const l=ne[t.index]||"$content",[d,n=""]=oe(l)?l[R.value].split("$content"):l.split("$content");return t.display.map(o=>e("div",L([d,...o,n])))}return t.display.map(l=>e("div",L(l)))},b=()=>{s.value=0,m.value=0,i("updateQuery",""),i("close")},J=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},u.value.map((t,l)=>{const d=c.isQuery&&c.index===l;return e("li",{class:["slimsearch-record-matches",{active:d}],role:"option","aria-selected":d,onClick:()=>{i("updateQuery",t)}},e("div",[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},t),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:M,onClick:n=>{n.preventDefault(),n.stopPropagation(),Q(l)}})]))}))])),K=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((t,l)=>{const d=!c.isQuery&&c.index===l;return e("li",{class:["slimsearch-record-matches",{active:d}],role:"option","aria-selected":d},e($,{to:t.link,onClick:()=>{b()}},()=>[e(I,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[t.header?e("div",{class:"slimsearch-record-content-header"},t.header):null,e("div",t.display.map(n=>L(n)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:M,onClick:n=>{n.preventDefault(),n.stopPropagation(),p(l)}})]))}))]));return se("keydown",t=>{if(a.isFocusing){if(q.value){if(t.key==="ArrowUp")z();else if(t.key==="ArrowDown")O();else if(t.key==="Enter"){const l=C.value.contents[m.value];w(a.queries.join(" ")),x(l),h.push(D(l)),b()}}else if(t.key==="ArrowUp")P();else if(t.key==="ArrowDown")Y();else if(t.key==="Enter"){const{index:l}=c;c.isQuery?(t.preventDefault(),i("updateQuery",u.value[l])):(h.push(v.value[l].link),b())}}}),ae([s,m],()=>{var t;(t=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||t.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!q.value:!j.value}]},a.queries.length?E.value?e(re,{hint:r.value.searching}):q.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},y.value.map(({title:t,contents:l},d)=>{const n=s.value===d;return e("div",{class:["slimsearch-record",{active:n}],role:"group","aria-selected":n},[e("div",{class:"slimsearch-record-title"},t||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((o,N)=>{const F=n&&m.value===N;return e("li",{class:["slimsearch-record-matches",{active:F}],role:"option","aria-selected":F},e($,{to:D(o),onClick:()=>{w(a.queries.join(" ")),x(o),b()}},()=>[o.type==="text"?null:e(o.type==="title"?ce:o.type==="heading"?ie:he,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[o.type==="text"&&o.header?e("div",{class:"slimsearch-record-content-header"},o.header):null,e("div",G(o))])]))}))])})):r.value.emptyResult:j.value?[J(),K()]:r.value.emptyHistory)}});export{qe as default};
