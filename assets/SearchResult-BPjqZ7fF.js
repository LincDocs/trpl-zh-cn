import{l as N,u as X,m as U,n as Z,y as ee,t as te,p as le,q as A,v as b,x as l,z as se,w as ae,A as re,R as I,B as ie,D as he,E as ce,F as ne,G as ue,H as T,J as $,K as oe,L as me,M as de,N as pe,O as ve,Q as ye,S as ge,T as fe,U as P,V as we,W as H}from"./app-CtoJuC-b.js";const xe=["/PREFACE.html","/","/SUMMARY.html","/appendix-00.html","/appendix-01-keywords.html","/appendix-02-operators.html","/appendix-03-derivable-traits.html","/appendix-04-useful-development-tools.html","/appendix-05-editions.html","/appendix-06-translation.html","/appendix-07-nightly-rust.html","/ch00-00-introduction.html","/ch01-00-getting-started.html","/ch01-01-installation.html","/ch01-02-hello-world.html","/ch01-03-hello-cargo.html","/ch02-00-guessing-game-tutorial.html","/ch03-00-common-programming-concepts.html","/ch03-01-variables-and-mutability.html","/ch03-02-data-types.html","/ch03-03-how-functions-work.html","/ch03-04-comments.html","/ch03-05-control-flow.html","/ch04-00-understanding-ownership.html","/ch04-01-what-is-ownership.html","/ch04-02-references-and-borrowing.html","/ch04-03-slices.html","/ch05-00-structs.html","/ch05-01-defining-structs.html","/ch05-02-example-structs.html","/ch05-03-method-syntax.html","/ch06-00-enums.html","/ch06-01-defining-an-enum.html","/ch06-02-match.html","/ch06-03-if-let.html","/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html","/ch07-01-packages-and-crates.html","/ch07-02-defining-modules-to-control-scope-and-privacy.html","/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html","/ch07-04-bringing-paths-into-scope-with-the-use-keyword.html","/ch07-05-separating-modules-into-different-files.html","/ch08-00-common-collections.html","/ch08-01-vectors.html","/ch08-02-strings.html","/ch08-03-hash-maps.html","/ch09-00-error-handling.html","/ch09-01-unrecoverable-errors-with-panic.html","/ch09-02-recoverable-errors-with-result.html","/ch09-03-to-panic-or-not-to-panic.html","/ch10-00-generics.html","/ch10-01-syntax.html","/ch10-02-traits.html","/ch10-03-lifetime-syntax.html","/ch11-00-testing.html","/ch11-01-writing-tests.html","/ch11-02-running-tests.html","/ch11-03-test-organization.html","/ch12-00-an-io-project.html","/ch12-01-accepting-command-line-arguments.html","/ch12-02-reading-a-file.html","/ch12-03-improving-error-handling-and-modularity.html","/ch12-04-testing-the-librarys-functionality.html","/ch12-05-working-with-environment-variables.html","/ch12-06-writing-to-stderr-instead-of-stdout.html","/ch13-00-functional-features.html","/ch13-01-closures.html","/ch13-02-iterators.html","/ch13-03-improving-our-io-project.html","/ch13-04-performance.html","/ch14-00-more-about-cargo.html","/ch14-01-release-profiles.html","/ch14-02-publishing-to-crates-io.html","/ch14-03-cargo-workspaces.html","/ch14-04-installing-binaries.html","/ch14-05-extending-cargo.html","/ch15-00-smart-pointers.html","/ch15-01-box.html","/ch15-02-deref.html","/ch15-03-drop.html","/ch15-04-rc.html","/ch15-05-interior-mutability.html","/ch15-06-reference-cycles.html","/ch16-00-concurrency.html","/ch16-01-threads.html","/ch16-02-message-passing.html","/ch16-03-shared-state.html","/ch16-04-extensible-concurrency-sync-and-send.html","/ch17-00-async-await.html","/ch17-01-futures-and-syntax.html","/ch17-02-concurrency-with-async.html","/ch17-03-more-futures.html","/ch17-04-streams.html","/ch17-05-traits-for-async.html","/ch17-06-futures-tasks-threads.html","/ch18-00-oop.html","/ch18-01-what-is-oo.html","/ch18-02-trait-objects.html","/ch18-03-oo-design-patterns.html","/ch19-00-patterns.html","/ch19-01-all-the-places-for-patterns.html","/ch19-02-refutability.html","/ch19-03-pattern-syntax.html","/ch20-00-advanced-features.html","/ch20-01-unsafe-rust.html","/ch20-03-advanced-traits.html","/ch20-04-advanced-types.html","/ch20-05-advanced-functions-and-closures.html","/ch20-06-macros.html","/ch21-00-final-project-a-web-server.html","/ch21-01-single-threaded.html","/ch21-02-multithreaded.html","/ch21-03-graceful-shutdown-and-cleanup.html","/foreword.html","/title-page.html","/404.html","/category/","/tag/","/Blog/","/star/","/timeline/"],ke="SLIMSEARCH_QUERY_HISTORY",y=P(ke,[]),be=()=>{const{queryHistoryCount:a}=H;return{enabled:a>0,queryHistories:y,addQueryHistory:h=>{y.value=Array.from(new Set([h,...y.value.slice(0,a-1)]))},removeQueryHistory:h=>{y.value=[...y.value.slice(0,h),...y.value.slice(h+1)]}}},D=a=>xe[a.id]+("anchor"in a?`#${a.anchor}`:""),He="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:M}=H,g=P(He,[]),Re=()=>({enabled:M>0,resultHistories:g,addResultHistory:i=>{{const h={link:D(i),display:i.display};"header"in i&&(h.header=i.header),g.value=[h,...g.value.slice(0,M-1)]}},removeResultHistory:i=>{g.value=[...g.value.slice(0,i),...g.value.slice(i+1)]}}),Qe=a=>{const i=oe(),h=U(),R=me(),c=A(0),f=b(()=>c.value>0),o=de([]);return pe(()=>{const{search:Q,terminate:d}=ve(),w=ge(p=>{const{resultsFilter:S=s=>s,querySplitter:v,suggestionsFilter:E,...r}=i.value;p?(c.value+=1,Q(p,h.value,r).then(s=>S(s,p,h.value,R.value)).then(s=>{c.value-=1,o.value=s}).catch(s=>{console.warn(s),c.value-=1,c.value||(o.value=[])})):o.value=[]},H.searchDelay-H.suggestDelay,{maxWait:5e3});ye([a,h],([p])=>w(p.join(" "))),fe(()=>{d()})}),{isSearching:f,results:o}};var qe=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:i}){const h=X(),R=U(),c=Z(ee),{addQueryHistory:f,queryHistories:o,removeQueryHistory:Q}=be(),{resultHistories:d,addResultHistory:w,removeResultHistory:p}=Re(),S=te(a,"queries"),{results:v,isSearching:E}=Qe(S),r=le({isQuery:!0,index:0}),s=A(0),m=A(0),j=b(()=>o.value.length>0||d.value.length>0),q=b(()=>v.value.length>0),C=b(()=>v.value[s.value]||null),O=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?d.value.length-1:o.value.length-1):r.index=t-1},Y=()=>{const{isQuery:e,index:t}=r;t===(e?o.value.length-1:d.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},_=()=>{s.value=s.value>0?s.value-1:v.value.length-1,m.value=C.value.contents.length-1},B=()=>{s.value=s.value<v.value.length-1?s.value+1:0,m.value=0},z=()=>{m.value<C.value.contents.length-1?m.value+=1:B()},V=()=>{m.value>0?m.value-=1:_()},L=e=>e.map(t=>we(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ne[e.index]||"$content",[n,k=""]=ue(t)?t[R.value].split("$content"):t.split("$content");return e.display.map(u=>l("div",L([n,...u,k])))}return e.display.map(t=>l("div",L(t)))},x=()=>{s.value=0,m.value=0,i("updateQuery",""),i("close")},G=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},c.value.queryHistory),o.value.map((e,t)=>l("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{i("updateQuery",e)}},[l(T,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},e),l("button",{class:"slimsearch-remove-icon",innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),Q(t)}})]))])),J=()=>l("ul",{class:"slimsearch-result-list"},l("li",{class:"slimsearch-result-list-item"},[l("div",{class:"slimsearch-result-title"},c.value.resultHistory),d.value.map((e,t)=>l(I,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{x()}},()=>[l(T,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(n=>L(n)).flat())]),l("button",{class:"slimsearch-remove-icon",innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),p(t)}})]))]));return se("keydown",e=>{if(a.isFocusing){if(q.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const t=C.value.contents[m.value];f(a.queries.join(" ")),w(t),h.push(D(t)),x()}}else if(e.key==="ArrowUp")O();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(i("updateQuery",o.value[t]),e.preventDefault()):(h.push(d.value[t].link),x())}}}),ae([s,m],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["slimsearch-result-wrapper",{empty:a.queries.length?!q.value:!j.value}],id:"slimsearch-results"},a.queries.length?E.value?l(re,{hint:c.value.searching}):q.value?l("ul",{class:"slimsearch-result-list"},v.value.map(({title:e,contents:t},n)=>{const k=s.value===n;return l("li",{class:["slimsearch-result-list-item",{active:k}]},[l("div",{class:"slimsearch-result-title"},e||c.value.defaultTitle),t.map((u,K)=>{const F=k&&m.value===K;return l(I,{to:D(u),class:["slimsearch-result-item",{active:F,"aria-selected":F}],onClick:()=>{f(a.queries.join(" ")),w(u),x()}},()=>[u.type==="text"?null:l(u.type==="title"?ie:u.type==="heading"?he:ce,{class:"slimsearch-result-type"}),l("div",{class:"slimsearch-result-content"},[u.type==="text"&&u.header?l("div",{class:"content-header"},u.header):null,l("div",W(u))])])})])})):c.value.emptyResult:j.value?[G(),J()]:c.value.emptyHistory)}});export{qe as default};
